<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>

<body>


    <!-- <form action="index.html" name="loginForm" id="lForm" onsubmit="return validate()">
        <h1>Login Here</h1>
        <label for="email">Email</label><br>
        <input type="email" name="email" id="gmail" class="inputElements">
        <br>
        <label for="password">Password</label><br>
        <input type="password" name="password" id="pass" class="inputElements">
        <br>

        <div class="allBtnsDiv">
            <input type="submit" value="Login" id="submit" class="allBtns">
            <input type="button" value="Sign Up" id="signUp" class="allBtns">
        </div>

    </form> -->

    <div class="container">
        <div class="form-box">
            <h1>Sign In</h1>
            <form action="index.html" name="loginForm" id="lForm" onsubmit="return validate()">

                <div class="input-group">
                    <div class="input-field">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" name="email" id="gmail" class="inputElements" placeholder="email">
                    </div>
                    <div class="input-field">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" name="password" id="pass" class="inputElements" placeholder="password">
                    </div>
                </div>
                 
                <div class="allBtnsDiv">
                    <input type="submit" value="LOGIN" class="allBtns">
                    <input type="button" value="SIGN UP" id="signUp" class="allBtns">
                </div>
            </form>
        </div>
    </div>


    <script>
        document.getElementById("signUp").addEventListener('click', () => {
            window.location.href = "./register.html";
            // return;
        })

        let user = JSON.parse(localStorage.getItem("user"));
        console.log(user);


        const validate = () => {
            console.log("in");

            if (user == null) {
                return false;
            }

            let email = document.forms["loginForm"]["email"].value;
            let password = document.forms["loginForm"]["password"].value;
            console.log(email, password);

            if (email == "") {
                alert("Please enter the email");
                return false;
            }
            if (password == "") {
                alert("Please enter the password");
                return false;
            }

            let currUser;
            let verify = user.some(person => {
                if (person.gmail == email && person.pass == password) {
                    console.log(person);
                    currUser = person;
                    alert('Logged in successfully');
                    console.log(currUser);
                    currUser = JSON.stringify(currUser);
                    localStorage.setItem("currUser", currUser);
                    return true;
                } else {
                    return false;
                }

            });

            console.log(verify);

            if (verify) {
                return true;
            } else {
                alert('user not found');
                return false;
            }
        }
    </script>
</body>

</html>